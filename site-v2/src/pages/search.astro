---
import Base from "../layouts/Base.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
const title = 'Search â€” FreePromptHub';
const description = 'Search prompts by title, description, and tags.';
---
<Base {title} {description} canonical="https://www.freeprompthub.com/search">
  <Header />
  <main class="container py-10">
    <h1 class="text-2xl font-bold mb-4">Search</h1>
    <input id="q" placeholder="Search prompts..." class="w-full border rounded-lg px-3 py-2 mb-4" />
    <div id="results" class="grid gap-4"></div>
  </main>
  <Footer />
  <script type="module">
    const input = document.getElementById('q');
    const out = document.getElementById('results');
    let data = [];
    async function load() {
      try { data = await (await fetch('/search-index.json')).json(); } catch {}
      render('');
    }
    function render(query) {
      const q = query.trim().toLowerCase();
      const items = !q ? data.slice(0, 24) : data.filter(it => (
        it.title.toLowerCase().includes(q) ||
        it.description.toLowerCase().includes(q) ||
        (it.tags||[]).join(' ').toLowerCase().includes(q)
      ));
      out.innerHTML = items.map(it => `
        <a class="card" href="${it.url}">
          <div class="text-sm text-gray-500">${it.category}</div>
          <div class="font-bold">${it.title}</div>
          <div class="text-gray-600">${it.description || ''}</div>
        </a>
      `).join('');
    }
    input.addEventListener('input', e => render(e.target.value));
    load();
  </script>
</Base>


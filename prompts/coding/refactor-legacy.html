<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Legacy Code Refactorer prompt - Transform spaghetti code into clean, maintainable architecture. Modernize legacy systems with best practices and design patterns.">
    <title>Legacy Code Refactorer Prompt - Coding | FreePromptHub</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
        <!-- Standardized Header with Mobile Navigation -->
    <header class="site-header">
        <div class="container header-content">
            <a class="brand" href="/">
                <span style="font-size: 1.5rem; margin-right: 5px;">ðŸš€</span>
                FreePromptHub
            </a>
            <button class="mobile-menu-toggle" aria-label="Menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav class="main-nav" aria-label="Primary">
                <a href="/prompts/business/">Business</a>
                <a href="/prompts/content/">Content</a>
                <a href="/prompts/coding/">Coding</a>
                <a href="/about.html">About</a>
                <a class="btn-primary" href="/#categories">Get Prompts</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
                <section class="affiliate-section" style="margin-top: 60px; padding: 30px; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: 10px;">
                    <h2 style="color: #00ff41; margin-bottom: 15px;">âš¡ Code at Peak Performance</h2>
                    <p style="color: white; margin-bottom: 20px;">Long coding sessions demand sustained mental energy. Neuro Energizer uses scientifically-proven nootropics to enhance focus, memory, and cognitive speed - helping you debug faster, think clearer, and code better for hours without the crash.</p>
                    <a href="https://9d76fn1hemvx3t0bresjkcmiki.hop.clickbank.net" target="_blank" style="display: inline-block; background: #00ff41; color: #1a1a2e; padding: 15px 30px; border-radius: 5px; text-decoration: none; font-weight: bold;">Unlock Your Coding Potential â†’</a>
                    <p style="color: rgba(255,255,255,0.8); font-size: 12px; margin-top: 15px;"><em>*Sponsored - We may earn a commission if you purchase. This helps us keep all prompts free.</em></p>
                </section>

            <nav class="breadcrumb">
                <a href="/">Home</a>
                <span class="separator">â€º</span>
                <a href="/prompts/coding/">Coding</a>
                <span class="separator">â€º</span>
                <span class="current">Legacy Code Refactorer</span>
            </nav>

            <article class="prompt-display">
                <h1 class="prompt-title">Legacy Code Refactorer</h1>
                <p class="prompt-description">
                    Transform legacy spaghetti code into clean, modern, maintainable architecture. Apply design patterns, SOLID principles, and best practices while preserving functionality and improving testability.
                </p>

                <div class="prompt-content">
                    <label for="prompt-text" class="prompt-label">Prompt:</label>
                    <textarea id="prompt-text" class="prompt-textarea" readonly>You are a senior software architect specializing in legacy code modernization. You excel at transforming messy, outdated code into clean, maintainable systems while preserving business logic and improving performance.

I need you to refactor legacy code into modern, clean architecture.

LEGACY CODE CONTEXT:
Language/Framework: [LANGUAGE AND VERSION]
Age of Codebase: [HOW OLD]
Main Problems: [SPAGHETTI CODE / NO TESTS / POOR PERFORMANCE / ETC]
Business Constraints: [MUST KEEP WORKING / GRADUAL MIGRATION / ETC]
Target Architecture: [MICROSERVICES / CLEAN ARCHITECTURE / ETC]

Current Code:
```[language]
[PASTE THE LEGACY CODE HERE]
```

Please provide:

1. CODE ANALYSIS
Identify all issues:
```
CRITICAL ISSUES (Fix immediately):
- Issue 1: [Problem] â†’ Impact: [What breaks]
- Issue 2: [Problem] â†’ Impact: [Security/Performance]

CODE SMELLS (Refactor soon):
- Smell 1: [Pattern] â†’ Location: [Where]
- Smell 2: [Anti-pattern] â†’ Why it's bad: [Reason]

TECHNICAL DEBT:
- Debt 1: [Missing tests/docs/etc]
- Debt 2: [Outdated dependencies]

METRICS:
- Cyclomatic Complexity: [Current score]
- Code Duplication: [% duplicated]
- Test Coverage: [Current %]
- Coupling: [High/Medium/Low]
```

2. REFACTORING STRATEGY
Step-by-step plan:
```
Phase 1: STABILIZE (Week 1)
â–¡ Add tests for current behavior
â–¡ Set up linting and formatting
â–¡ Document existing functionality
â–¡ Create safety net for refactoring

Phase 2: EXTRACT (Week 2-3)
â–¡ Extract methods from large functions
â–¡ Separate concerns into modules
â–¡ Remove duplicate code
â–¡ Introduce interfaces/contracts

Phase 3: RESTRUCTURE (Week 4-5)
â–¡ Apply design patterns
â–¡ Implement dependency injection
â–¡ Create proper layers
â–¡ Add proper error handling

Phase 4: OPTIMIZE (Week 6)
â–¡ Performance improvements
â–¡ Remove unnecessary code
â–¡ Update dependencies
â–¡ Add monitoring
```

3. REFACTORED CODE
Modern, clean implementation:
```[language]
// ============================================
// CLEAN VERSION WITH PROPER ARCHITECTURE
// ============================================

// Domain Models
class [Entity] {
    // Business logic here
}

// Repository Pattern
interface [Repository] {
    // Data access abstraction
}

class [RepositoryImpl] implements [Repository] {
    // Actual data access
}

// Service Layer
class [Service] {
    constructor(private repository: [Repository]) {
        // Dependency injection
    }
    
    // Business logic methods
}

// Controller/Handler
class [Controller] {
    constructor(private service: [Service]) {}
    
    // Request handling
}

// Dependency Injection Container
const container = {
    // Wire up dependencies
};
```

4. DESIGN PATTERNS APPLIED
Explain each pattern used:
- **Pattern 1:** [Name]
  - Why used: [Solves what problem]
  - Implementation: [How applied]
  
- **Pattern 2:** [Name]
  - Why used: [Benefit]
  - Implementation: [Where in code]

5. BEFORE/AFTER COMPARISON
Show the transformation:
```
BEFORE:
- Lines of Code: 500
- Functions: 3 (avg 166 lines each)
- Cyclomatic Complexity: 45
- Test Coverage: 0%
- Dependencies: Hardcoded
- Error Handling: Try-catch everything

AFTER:
- Lines of Code: 350
- Functions: 25 (avg 14 lines each)
- Cyclomatic Complexity: 8
- Test Coverage: 85%
- Dependencies: Injected
- Error Handling: Specific and meaningful
```

6. MIGRATION SCRIPT
Safe transition plan:
```[language]
// Step 1: Run in parallel
class LegacyAdapter {
    // Wrap new code to work with old
}

// Step 2: Feature flag
if (useNewImplementation) {
    // New clean code
} else {
    // Old code (temporary)
}

// Step 3: Data migration
async function migrateData() {
    // Move from old structure to new
}

// Step 4: Cleanup
// Remove old code after verification
```

7. UNIT TESTS
Comprehensive test suite:
```[language]
describe('[Module] Tests', () => {
    // Setup and teardown
    
    test('should handle normal case', () => {
        // Arrange
        // Act
        // Assert
    });
    
    test('should handle edge case', () => {
        // Test edge scenarios
    });
    
    test('should handle errors gracefully', () => {
        // Test error scenarios
    });
});
```

8. DOCUMENTATION
Clear documentation for maintenance:
```markdown
## Architecture Overview
[Diagram or description of new structure]

## Key Components
- Component A: Responsible for...
- Component B: Handles...

## Data Flow
1. Request comes in via...
2. Processed by...
3. Stored in...

## Configuration
- Environment variables needed
- How to set up locally
- Deployment instructions
```

9. PERFORMANCE IMPROVEMENTS
Optimizations made:
- **Before:** O(nÂ²) nested loops
  **After:** O(n log n) with better algorithm
  
- **Before:** 5 database calls per request
  **After:** 1 optimized query
  
- **Before:** No caching
  **After:** Redis cache layer

- **Memory usage:** Reduced by 40%
- **Response time:** Improved by 60%

10. BREAKING CHANGES
What changes for consumers:
```
API Changes:
- Endpoint /old/path â†’ /api/v2/resource
- Parameter oldParam â†’ newParam
- Response format: XML â†’ JSON

Database Changes:
- Table old_table â†’ Split into table_a, table_b
- Column changes: [list changes]

Configuration:
- New required env vars: [list]
- Deprecated settings: [list]
```

11. ROLLBACK PLAN
If something goes wrong:
```bash
# Quick rollback procedure
1. Switch feature flag to 'old'
2. Restore database backup (if needed)
3. Deploy previous version
4. Investigate issues in staging
```

12. MONITORING & METRICS
Track the improvements:
- Response time metrics
- Error rate monitoring
- Memory usage tracking
- Code quality metrics
- Test coverage reports

Please ensure the refactored code:
- Follows SOLID principles
- Is easily testable
- Has clear separation of concerns
- Is well-documented
- Maintains backward compatibility where needed</textarea>
                    
                    <button id="copy-button" class="copy-button">
                        <span class="button-text">Copy Prompt</span>
                        <span class="success-message">Copied!</span>
                    </button>
                </div>

                

                <section class="pro-tips">
                    <h2>Pro Tips:</h2>
                    <ul>
                        <li>Include the full context - surrounding code helps identify patterns</li>
                        <li>Mention any business logic that must be preserved</li>
                        <li>Specify if you need to maintain API compatibility</li>
                        <li>Note any performance requirements or constraints</li>
                        <li>Include examples of how the code is currently called/used</li>
                    </ul>
                </section>

                <section class="related-prompts">
                    <h2>Related Prompts</h2>
                    <div class="related-grid">
                        <a href="/prompts/coding/test-generator.html" class="related-card">
                            <h3>Unit Test Generator</h3>
                            <p>Add tests before refactoring</p>
                            <span class="category-tag">Coding</span>
                        </a>
                        <a href="/prompts/coding/code-reviewer.html" class="related-card">
                            <h3>Code Review Pro</h3>
                            <p>Review refactored code quality</p>
                            <span class="category-tag">Coding</span>
                        </a>
                        <a href="/prompts/coding/debug-master.html" class="related-card">
                            <h3>Debug Master</h3>
                            <p>Fix issues after refactoring</p>
                            <span class="category-tag">Coding</span>
                        </a>
                    </div>
                </section>
            
                <!-- Affiliate Recommendation -->
                

            </article>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 FreePromptHub. All prompts are free to use.</p>
            <nav>
                <a href="/about">About</a>
                <a href="/contact">Contact</a>
                <a href="/privacy">Privacy</a>
            </nav>
        </div>
    </footer>

    <script src="/script.js"></script>
</body>
</html>